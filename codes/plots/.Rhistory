?c
source('~/map.R')
mysh = fortify(Changsha, region = 'NAME99')
mysh = fortify(yangzhou, region = 'NAME99')
mysh = fortify(yangzhou)
mysh = transform(mysh, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
head(mysh)
?fortify
yangzhou = mydat[substr(as.character(mydat$ADCODE99), 1, 4) == "3210",]
head(yangzhou)
yangzhou$ADCODE99
yangzhou$NAME99
as.data.frame(yangzhou)
mysh=as.data.frame(yangzhou)
mysh
mysh = fortify(mysh, region = 'NAME99')
mysh
myepidat = data.frame(id = unique(sort(mysh$id)))
myepidat
myepidat = data.frame(id = unique(sort(mysh$NAME99)))
names(mysh)[1:2] = c("x","y")
mysh
myepidat$rand = runif(length(myepidat$id))
myepidat
csmap = ggplot(myepidat) +
geom_map(aes(map_id = id, fill = rand), color = "white", map = mysh) +
scale_fill_gradient(high = "darkgreen",low = "lightgreen") +
expand_limits(mysh) + coord_map()
mysh=as.data.frame(yangzhou)
mysh = fortify(mysh, region = 'NAME99')
names(mysh)[11:12] = c("x","y")
mysh
csmap = ggplot(myepidat) +
geom_map(aes(map_id = id, fill = rand), color = "white", map = mysh) +
scale_fill_gradient(high = "darkgreen",low = "lightgreen") +
expand_limits(mysh) + coord_map()
names(mysh)[7] = "id"
mysh
csmap = ggplot(myepidat) +
geom_map(aes(map_id = id, fill = rand), color = "white", map = mysh) +
scale_fill_gradient(high = "darkgreen",low = "lightgreen") +
expand_limits(mysh) + coord_map()
print(csmap)
source('~/map.R')
install.packages('gpclib')
install.packages('gpclib')
install.packages('rgeos')
mysh = fortify(yangzhou, region = 'NAME99')
mysh = fortify(yangzhou, region = 'NAME99')
source('~/ml.R', encoding = 'UTF-8')
install.packages('colorspace')
install.packages("colorspace")
install.packages("colorspace")
install.packages("colorspace")
install.packages("colorspace")
source('~/citydrawing.R')
source('~/citydrawing.R')
city=alldata[substr(as.character(alldata$ADCODE99), 1, 4) == '3210',]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
names(citydata)[1:2] = c("x","y")
randdata = data.frame(id = unique(sort(citydata$id)))
randdata$rand = runif(length(randdata$id))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
library("colorspace")
pal <- choose_palette()
?colorspaces
install.packages("colorspace")
install.packages("colorspace")
?colorspace
??colorspace
cm.colors()
colors()
citymap = ggplot(citydata, aes(x = x, y = y,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "white",aes(group=group))+
expand_limits(citydata) + coord_map()
source('~/citydrawing.R')
library("ggplot2")
install.packages("ggplot2")
source('~/citydrawing.R')
library("ggplot2", lib.loc="~/R/win-library/3.2")
detach("package:ggplot2", unload=TRUE)
library("plyr", lib.loc="~/R/win-library/3.2")
detach("package:plyr", unload=TRUE)
library("plyr", lib.loc="~/R/win-library/3.2")
detach("package:colorspace")
library("ggplot2", lib.loc="~/R/win-library/3.2")
library("sp", lib.loc="~/R/win-library/3.2")
detach('colorspace')
detach('colorspaces')
remove.packages("ggplot2", lib="~/R/win-library/3.2")
install.packages("ggplot2")
library("ggplot2", lib.loc="~/R/win-library/3.2")
install.packages("ggplot2", repos="http://cran.rstudio.com/", dependencies=TRUE)
library("ggplot2", lib.loc="~/R/win-library/3.2")
?ggplot
install.packages('colorspace')
install.packages("colorspace")
install.packages('colorspace', depend=TRUE)
library("ggplot2", lib.loc="~/R/win-library/3.2")
citymap = ggplot(citydata, aes(x = x, y = y,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "white",aes(group=group))+
expand_limits(citydata) + coord_map()
source('~/citydrawing.R')
city=alldata[substr(as.character(alldata$ADCODE99), 1, 4) == as.character(3210),]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
names(citydata)[1:2] = c("x","y")
randdata = data.frame(id = unique(sort(citydata$id)))
randdata$rand = runif(length(randdata$id))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
citymap = ggplot(citydata, aes(x = x, y = y,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "white",aes(group=group))+
expand_limits(citydata) + coord_map()
citymap
pal <- choose_palette()
library("colorspace", lib.loc="~/R/win-library/3.2")
pal <- choose_palette()
pal(7)
pal
pal <- choose_palette()
pal(9)
pal(7)
pal <- choose_palette()
?choose_palette
pal(7)
pal <- choose_palette()
pal(7)
citymap=citymap+scale_fill_manual(values=pal(nrow(tmp))))
citymap=citymap+scale_fill_manual(values=pal(nrow(tmp)))
citymap
display.brewer.all()
citymap=citymap+scale_fill_manual(values=brewer.pal(nrow(tmp), "BuGn"))
citymap
library("RColorBrewer", lib.loc="~/R/win-library/3.2")
citymap=citymap+scale_fill_manual(values=brewer.pal(nrow(tmp), "BuGn"))
citymap
brewer.pal(nrow(14))
values=brewer.pal(nrow(14), "BuGn")
values=brewer.pal(14, "BuGn")
values
source('~/citydrawing.R')
citydrawing(2101,alldata)
citydrawing(2102,alldata)
citydrawing(2103,alldata)
citydrawing(2104,alldata)
citydrawing(2105,alldata)
citydrawing(2105,alldata)
citydrawing(2106,alldata)
citydrawing(2107,alldata)
citydrawing(2108,alldata)
citydrawing(2109,alldata)
citydrawing(2110,alldata)
citydrawing(2111,alldata)
citydrawing(2112,alldata)
citydrawing(2113,alldata)
citydrawing(2114,alldata)
citydrawing(2115,alldata)
pal <- choose_palette()
pal
?colorRampPalette
source('~/citydrawing.R')
citydrawing(2112,alldata)
citydrawing(3206,alldata)
source('~/citydrawing.R')
citydrawing(3206,alldata)
source('~/citydrawing.R')
citydrawing(320,alldata)
source('~/citydrawing.R')
?colorRampPalette
citydrawing(320,alldata)
citydrawing(330,alldata)
citydrawing(350,alldata)
source('~/citydrawing.R')
citydrawing(350,alldata)
source('~/citydrawing.R')
citydrawing(350,alldata)
source('~/citydrawing.R')
citydrawing(3206,alldata)
source('~/citydrawing.R', encoding = 'UTF-8')
citydrawing(3206,alldata)
source('~/citydrawing.R')
citydrawing(3207,alldata)
source('~/citydrawing.R')
citydrawing(3207,alldata)
citydrawing(3208,alldata)
source('~/citydrawing.R')
citydrawing(3208,alldata,len=FALSE)
citydrawing(3207,alldata,len=FALSE)
citydrawing(3209,alldata,len=FALSE)
citydrawing(3302,alldata)
citydrawing(3302,alldata, len=FALSE)
citydrawing(3502,alldata, len=FALSE)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
citydrawing(3302,alldata)
source('~/citydrawing.R')
source('~/citydrawing.R')
citydrawing(3302,alldata)
citydrawing(3201,alldata)
citydrawing(3202,alldata)
citydrawing(3204,alldata)
source('~/citydrawing.R')
citydrawing(3202,alldata)
citydrawing(3204,alldata)
citydrawing(3204,alldata,len=FALSE)
citydrawing(3211,alldata,len=FALSE)
citydrawing(3211,alldata)
citydrawing(3202,alldata,len=FALSE)
adata=readShapePoly("E:/maps_data/maps/bou3/diqujie_polyline.shp")
adata=readShapePoly("E:/maps_data/maps/bou2/diquJie_polyline.shp")
adata=readShapePoly("E:/maps_data/maps/bou2/diquJie_polyline.shp")
adata=readShapePoly("E:/maps_data/maps/bou3/diquJie_polyline.shp")
adata=readShapeLines("E:/maps_data/maps/bou3/diquJie_polyline.shp")
plot(adata)
head(alldata)
colnames(alldata)
names(alldata)
citydata = fortify(city, region = 'NAME99')
names(citydata)
source('~/citydrawing.R')
citydrawing(3202,alldata,len=FALSE)
citydrawing(3202,alldata)
source('~/citydrawing.R')
citydrawing(3202,alldata,len=FALSE)
source('~/citydrawing.R')
citydrawing(3202,alldata,len=FALSE)
citydata
head(citydata)
names(citydata)
source('~/citydrawing.R')
citydrawing(3202,alldata,len=FALSE)
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()
citymap
citymap+p+theme(panel.grid.major=element_line())
citymap+theme(panel.grid.major=element_line())
?theme_bw()
citymap+theme(theme_grey())
citymap+theme_set(theme_grey())
citymap+theme_set(theme_gray())
citymap+scale_fill_manual(values=colors())
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap=citymap+scale_fill_manual(values=getPalette(nrow(tmp)))
citymap=citymap+scale_fill_manual(values=getPalette(6))
citymap
city=alldata[substr(as.character(alldata$ADCODE99), 1, 2) == "31",]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()
citymap
citymap=citymap+scale_fill_manual(values=getPalette(nrow(tmp)))
citymap
tmp
citymap+geom_text(aes(x = CENTROID_X,y = CENTROID_Y,label = id), family = "times", data = tmp)+scale_fill_manual(values=getPalette(nrow(tmp)),guide=FALSE)
citymap+geom_text(aes(x = CENTROID_X,y = CENTROID_Y,label = id), family = "times", data = tmp)+scale_fill_manual(values=getPalette(nrow(tmp)),guide=FALSE)++theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())
source('~/citydrawing.R')
city=alldata[substr(as.character(alldata$ADCODE99), 1, 2) =="32",]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()
library("ggplot2", lib.loc="~/R/win-library/3.2")
library("RColorBrewer", lib.loc="~/R/win-library/3.2")
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap
city=alldata[substr(as.character(alldata$ADCODE99), 1, 2) =="31",]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()
citymap
citymap=citymap+geom_text(aes(x = CENTROID_X,y = CENTROID_Y,label = id), family = "times", data = tmp)+scale_fill_manual(values=getPalette(nrow(tmp)),guide=FALSE)
citymap
citymap+theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())
city=alldata[substr(as.character(alldata$ADCODE99), 1, 4) == "3210",]
citydata = fortify(city, region = 'NAME99')
citydata= transform(citydata, id = iconv(id, from = 'GBK'), group = iconv(group, from = 'GBK'))
agg=aggregate(AREA ~ NAME99,as.data.frame(city), max)
arealist=merge(agg,as.data.frame(city))
tmp=arealist[,cbind(11,12)]
tmp$id = arealist$NAME99
tmp$group= arealist$NAME99
getPalette = colorRampPalette(brewer.pal(9, "Blues"))
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()+theme(axis.line=element_blank(),axis.text.x=element_blank(),
axis.text.y=element_blank(),axis.ticks=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
panel.background=element_blank(),panel.border=element_blank(),panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),plot.background=element_blank())
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))+
geom_polygon(aes(group=group))+
geom_path(colour = "gray40",aes(group=group))+
expand_limits(citydata) + coord_map()
citymap
install.packages("knitr")
title: "Untitled"
install.packages("rticles")
devtools::install_github("rstudio/rticles")
install.packages("devtools")
devtools::install_github("rstudio/rticles")
install.packages("Rtools")
library("rticles", lib.loc="~/R/win-library/3.2")
number=[2301:2304]
number=2301:2304
lapply(number,citydrawing(alldata=alldata))
lapply(number,citydrawing)
t=apply(number,alldata,citydrawing)
t=apply(number,1,citydrawing)
t=sapply(number,fun=citydrawing(number,alldata=alldata))
t=sapply(number,FUN = =citydrawing(number,alldata=alldata))
t=sapply(number,FUN =citydrawing(number,alldata=alldata))
source('~/citydrawing.R')
t=sapply(number,FUN =citydrawing(number,alldata=alldata))
t=sapply(number,FUN =citydrawing(X),list(alldata=alldata))
t=sapply(number,FUN =citydrawing(x),list(alldata=alldata))
t=sapply(number,FUN =citydrawing(x),alldata=alldata)
t=sapply(number,FUN =citydrawing(x),alldata)
t=sapply(number,FUN =citydrawing,alldata)
t
?multiplot
t[,1]
t[1,]
t
t[,1]
print(t[[1]])
print(t(1))
t
list[t[,1]]
list(t[,1])
a=t[,1]
a
print(a)
ggplot(a)
t=lapply(number,FUN =citydrawing,alldata)
t
t=lapply(number,FUN =citydrawing,alldata,FALSE)
t
install.packages(easyGgplot2)
install.packages("easyGgplot2")
ggplot2.multiplot
source('~/citydrawing.R')
source('~/citydrawing.R')
source('~/citydrawing.R')
windowsFonts(Times=windowsFont("TT Times New Roman"))
source('~/citydrawing.R')
source('~/citydrawing.R')
citydrawing(3210,alldata,FALSE)
install.packages('Cairo')
require('Cairo')
Cairo(600, 600, file="plot.png", type="png", bg="white")
plot(1:10,1:10,type="n");
text(2,10,"宋体",family="SimSun");
text(2,8,"黑体",family="SimHei");
text(2,6,"楷体",family="KaiTi_GB2312");
text(2,4,"隶书",family="LiSu");
text(2,2,"雅黑",family="MSYH");
text(6,10,"Arial",family="Arial");
text(6,8,"Times New Roman",family="Times New Roman");
text(6,6,"Courier New",family="Courier New");
text(6,4,"Consolas",family="Consolas");
text(6,2,"Symbol",family="Symbol");
dev.off();
getwd()
file.show('plot.png')
install.packages('Cairo')
install.packages("Cairo")
citydrawing(3210,alldata,FALSE)
citydrawing(3210,alldata,FALSE)
?fortify
citydrawing(3210,alldata)
citydata = fortify(city, region = 'NAME99')
citymap = ggplot(citydata, aes(x = long, y = lat,group=group,fill=id))
install.packages("ggplot2",dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
install.packages("ggplot2", dependencies = TRUE)
print("辣鸡")
setwd()
setwd("F:/graduation-project/codes/plots")
a=load("F:\\graduation-project\\codes\\exampleimage\\lena.png")
a=load("F:\\ucid_gray\\00001.png")
source('F:/graduation-project/codes/plots/background_illustrate.R')
source('F:/graduation-project/codes/plots/background_illustrate.R')
source('F:/graduation-project/codes/plots/background_illustrate.R')
source('F:/graduation-project/codes/plots/background_illustrate.R')
?png
source('F:/graduation-project/codes/plots/background_illustrate.R')
source('F:/graduation-project/codes/plots/background_illustrate.R')
source('F:/graduation-project/codes/plots/background_illustrate.R')
?read
library('read')
?readPNG
install.packages('png')
install.packages('png')
install.packages('png')
install.packages('jpeg')
install.packages('ggplot2')
install.packages("ggplot2")
yum install libpng-devel
install.packages("libpng12-dev")
capabilities()["png"]
install.packages(c("BH", "curl", "devtools", "digest", "evaluate", "formatR", "git2r", "gridExtra", "gtable", "highr", "Hmisc", "htmltools", "httr", "jsonlite", "kernlab", "knitr", "latticeExtra", "maps", "maptools", "memoise", "multcomp", "munsell", "mvtnorm", "packrat", "quantreg", "R6", "Rcpp", "RCurl", "rgeos", "rmarkdown", "rsconnect", "rstudioapi", "scales", "sp", "stringi", "testthat", "TH.data", "tikzDevice", "zoo"))
install.packages("png")
source('F:/graduation-project/codes/plots/background_illustrate.R')
